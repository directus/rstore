<script setup>
import FrameworkBadges from './components/FrameworkBadges.vue'
</script>

# 0.7 to 0.8 Migration Guide

## Plugins setup can't be async

<FrameworkBadges
  :frameworks="{
    vue: true,
    nuxt: true,
  }"
/>

::: info Why this change?
This change helps fixing issues with access to app context asynchronously during the store initialization and makes the whole system more predictable and stable.
:::

```ts
export default definePlugin({
  name: 'my-rstore-plugin',

  async setup({ hook }) { // [!code --]
  setup({ hook }) { // [!code ++]
    const stuff = await getAsyncStuff() // [!code --]

    let stuff: Awaited<ReturnType<typeof getAsyncStuff>> // [!code ++]
    hook('init', async () => { // [!code ++]
      stuff = await getAsyncStuff() // [!code ++]
    }) // [!code ++]
  }
})
```

## Update Nuxt

<FrameworkBadges
  :frameworks="{
    vue: false,
    nuxt: true,
  }"
/>

You need to update nuxt to `>4.1.2` or `^3.19.2`.
